# Bank Tech Test

This is a tech test for a simple OO app to manage a bank account.
The main app has no dependencies.
Gems will have to be installed to run the tests.

Tech Stack:
- Ruby/IRB for the implementation.
- Rspec for the Tests.
- Git for version control
- Rubocop for linting

## Getting Started
`git clone https://github.com/dtrts/bank_tech_test`

## Usage

`irb -r ./lib/account.rb`
```ruby
account = Account.new
account.deposit(10)
account.withdraw(5)
account.statement
```

## Running Tests and Linting
```
bundle install
rspec
rubocop
```

## Model

| Class | Method | Description |
|---|---|---|
| Account | .new(transaction_class, printer_class) | Creates a new account. The transaction and printer classes can be provided if desired. The defaults will be the classes described below. |
| Account | #deposit(amount) | Creates a new transaction using the amount provided and appends it to the account's  transaction log. Returns a copy of the transaction log. |
| Account | #withdraw(amount) | Creates a new transaction using the amount provided and appends it to the account's  transaction log.  Will raise error if the resulting current balance is negative. Will raise error if amount is 0. Returns a copy of the transaction log. |
| Account | #statement | Prints and returns the transaction log statement as generated by the printer class. |
||||
| Transaction | .new(amount) | Creates a new transaction object with the amount provided and the current time. The amount can be positive or negative. The amount  has two checks. 1) The amount must be a numeric. 2) The amount cannot have fractional pence.  |
| Transaction | #amount | Returns the amount held by the transaction. A numeric. |
| Transaction | #datetime | Returns the datetime held by the transaction. Always a datetime. |
| Transaction | #deposit? | Returns true if the amount is positive |
| Transaction | #withdrawal? | Returns the opposite of deposit. (Current behaviour has 0 as a withdrawal) |
||||
| Printer | .new | Creates a new printer object |
| Printer | #statement(transactions) | Accepts an array of transactions and generates a statement. The header is always provided and it ends with a new line. The statement is print()'d and also returned. |




---

## Specification

### Requirements

- You should be able to interact with your code via a REPL like IRB or the JavaScript console. (You don't need to implement a command line interface that takes input from STDIN.)
- Deposits, withdrawal.
- Account statement (date, amount, balance) printing.
- Data can be kept in memory (it doesn't need to be stored to a database or anything).

### Acceptance criteria

Given a client makes a deposit of 1000 on 10-01-2012
And a deposit of 2000 on 13-01-2012
And a withdrawal of 500 on 14-01-2012
When she prints her bank statement
Then she would see

```
date || credit || debit || balance
14/01/2012 || || 500.00 || 2500.00
13/01/2012 || 2000.00 || || 3000.00
10/01/2012 || 1000.00 || || 1000.00
```

## Design / Approach

My approach was to initially build upon some feature tests which encompassed the requirements.
Upon passing all of the feature tests I think looked to extract classes and reduce the responsibility of the single class I had made.



Account class.
Holds balance
Can print a statement.
Deposits and withdrawals can be made.
Deposits and withdrawals.


## Improvements

### Class extraction.
Bring out transaction class.
The transaction class will hold: amount, datetime
The transaction shouldn't be alterable.
Will return a dup

Will manage guarding for fractional amounts and types.
```
tr = Transaction.new(amount)
tr.credit?
tr.debit?
tr.amount
tr.datetime
amount = tr.amount
amount += 10
amount != tr.amount # => true
```

### Class Extraction
Removing a printer class to prepare statements
